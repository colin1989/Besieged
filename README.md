# Besieged

1. 构建map

2. 坐标转换

3. 触摸分派，zoom层与地图操作层
- 单指按下：选中已高亮的unit 
- 单指滑动：map移动、unit移动 
- 单指抬起：无
- 双指按下：无
- 双指滑动：zoom
- 双指抬起：无

4. autorequire

5. 保存unit格式、表的配置、占地与边的实际大小

6. unit在地图上的实际位置与顶点位置的关系

7. unit拖动时的绿色底板、颜色变动

8. unit拖动时的位移、位置检测、逻辑位置变动
放大时的位置计算
当move时，记录两个触摸点的中心点在map上的位置，然后对zoom层进行缩放操作，缩放后，将刚才记录的中心点转换成世界坐标，并且与开始的中心点世界坐标做差值，即为移动的向量。

9. unit需要消息，添加组件系统

10. 待重构：unit的显示与数据分离；底板的变色逻辑；地图上的点击操作都是基于显示坐标，而不是逻辑坐标
- 当移动unit时，只针对sprite_操作而不改变vertex_，增加临时地图概念，专门存放移动或者待建造的unit，当取消对选中unit的操作时，清空临时地图。暂时考虑针对临时地图的操作方法用try起头
- 或者，记录移动的临时地图位置，当began时优先判断selectedUnit是否点中